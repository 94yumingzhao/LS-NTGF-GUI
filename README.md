# LS-NTGF-GUI

生产计划优化器的 Qt6 图形界面，基于 LS-NTGF-RR 求解器。

## 功能

- **数据导入**: 支持 CSV 格式的生产计划数据文件
- **参数配置**: CPLEX 时限、惩罚系数、大订单阈值等
- **实时进度**: 4 阶段求解进度条和耗时显示
- **结果展示**: 各阶段目标值、运行时间、Gap 等
- **日志输出**: 实时求解日志，带时间戳
- **结果导出**: CSV 格式导出

## 求解算法

PP-GCB 三阶段优化算法：

1. **阶段 1 (设置结构)**: 固定 λ=0，放大产能 10 倍，求解设置变量 y*
2. **阶段 2 (结转优化)**: 固定 y*，优化结转变量 λ
3. **阶段 3 (最终规划)**: 固定 y* 和 λ*，恢复真实产能，求解最终生产计划

## 技术栈

- **GUI**: Qt 6.10+
- **构建**: CMake 3.24+
- **编译器**: MSVC 2022 (C++20)
- **求解器**: IBM CPLEX 22.1.0

## 项目结构

```
LS-NTGF-GUI/
├── CMakeLists.txt          # CMake 构建配置
├── CMakePresets.json       # 构建预设
├── src/
│   ├── main.cpp            # 程序入口
│   ├── main_window.h/cpp   # 主窗口
│   ├── parameter_widget.h/cpp   # 参数设置面板
│   ├── results_widget.h/cpp     # 结果显示面板
│   ├── log_widget.h/cpp         # 日志输出面板
│   └── solver_worker.h/cpp      # 后台求解线程
└── build/                  # 构建输出目录
```

## 构建

### 依赖

- Qt 6.10+ (Widgets, Core)
- IBM CPLEX 22.1.0
- LS-NTGF-RR 项目 (同级目录)

### 编译

```bash
# 配置
cmake --preset vs2022-release

# 构建
cmake --build build/vs2022 --config Release

# 部署 Qt 运行时
windeployqt build/vs2022/bin/Release/LS-NTGF-GUI.exe
```

## 使用

1. 点击「浏览...」选择 CSV 数据文件
2. 调整参数设置（可选）
3. 点击「开始优化」
4. 查看进度和结果
5. 点击「导出结果...」保存

## 界面预览

```
┌─────────────────────────────────────────────────┐
│  [浏览...] [CSV文件路径]     │  参数设置        │
│  订单数: 100  周期数: 12     │  CPLEX时限: 30s  │
├─────────────────────────────────────────────────┤
│  [开始优化]  [取消]              状态: 就绪     │
├─────────────────────────────────────────────────┤
│  订单合并:   [████████████] 100%    0.5s       │
│  阶段 1:     [████████░░░░]  65%    12.3s      │
│  阶段 2:     [░░░░░░░░░░░░]   0%    --         │
│  阶段 3:     [░░░░░░░░░░░░]   0%    --         │
├─────────────────────────────────────────────────┤
│  求解结果            │  运行日志                │
│  阶段 | 目标值 | Gap │  [10:23:45] 开始优化... │
│  1    | 3452   | 0%  │  [10:23:46] 数据已加载  │
└─────────────────────────────────────────────────┘
```

## 许可证

MIT License
